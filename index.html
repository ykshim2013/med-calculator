<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clinical Medication Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Clinical Medication Calculator</h1>
        <p class="subtitle">Nursing & Clinical Staff Reference Tool</p>
    </header>

    <div class="disclaimer">
        <strong>DISCLAIMER:</strong> This tool is for reference purposes only. Always verify calculations independently and follow institutional protocols. This calculator does not replace clinical judgment or pharmacist consultation.
    </div>

    <!-- Three Column Layout with Index Panel -->
    <div class="main-container">
        <!-- MEDICATION INDEX PANEL -->
        <aside class="medication-index" id="medication-index">
            <div class="index-header">
                <h3>Medication Index</h3>
                <button class="index-toggle" onclick="toggleIndexPanel()" title="Collapse panel">◀</button>
            </div>
            <div class="index-search">
                <input type="text" id="index-search" placeholder="Search by name or brand..." oninput="filterMedicationIndex(this.value)">
                <div class="index-controls">
                    <button class="index-ctrl-btn" onclick="expandAllIndex()" title="Expand all">⊞</button>
                    <button class="index-ctrl-btn" onclick="collapseAllIndex()" title="Collapse all">⊟</button>
                </div>
            </div>
            <div class="index-content" id="index-content">
                <!-- Will be populated by JavaScript -->
            </div>
        </aside>

        <!-- Calculator Columns -->
        <div class="dual-column-container">
            <!-- LEFT COLUMN -->
            <div class="calculator-column" id="left-column">
            <div class="column-header">
                <span class="column-label">Calculator 1</span>
                <select class="column-selector" onchange="switchCalculator('left', this.value)">
                    <option value="weight-dose">Weight-Based Dosing</option>
                    <option value="antibiotics">Medications</option>
                    <option value="drip-rate">IV Drip Rate</option>
                    <option value="dilution">Dilution</option>
                </select>
            </div>

            <!-- Weight-Based Dosing Calculator -->
            <section id="left-weight-dose" class="calculator-section active">
                <h2>Weight-Based Dosing Calculator</h2>
                <p class="description">Calculate medication dose based on patient weight (mg/kg dosing)</p>

                <div class="input-group">
                    <label for="left-patient-weight">Patient Weight</label>
                    <div class="input-with-unit">
                        <input type="number" id="left-patient-weight" step="0.1" min="0" placeholder="Enter weight">
                        <select id="left-weight-unit">
                            <option value="kg">kg</option>
                            <option value="lb">lb</option>
                        </select>
                    </div>
                </div>

                <div class="input-group">
                    <label for="left-dose-per-kg">Dose per kg</label>
                    <div class="input-with-unit">
                        <input type="number" id="left-dose-per-kg" step="0.01" min="0" placeholder="Enter dose">
                        <select id="left-dose-unit">
                            <option value="mg">mg/kg</option>
                            <option value="mcg">mcg/kg</option>
                            <option value="units">units/kg</option>
                        </select>
                    </div>
                </div>

                <div class="input-group">
                    <label for="left-frequency">Frequency (optional)</label>
                    <select id="left-frequency">
                        <option value="1">Once daily (QD)</option>
                        <option value="2">Twice daily (BID)</option>
                        <option value="3">Three times daily (TID)</option>
                        <option value="4">Four times daily (QID)</option>
                        <option value="6">Every 4 hours (Q4H)</option>
                        <option value="8">Every 3 hours (Q3H)</option>
                    </select>
                </div>

                <button class="calculate-btn" onclick="calculateWeightDoseColumn('left')">Calculate Dose</button>

                <div id="left-weight-dose-result" class="result-box hidden">
                    <h3>Results</h3>
                    <div class="result-item">
                        <span class="label">Single Dose:</span>
                        <span id="left-single-dose" class="value"></span>
                    </div>
                    <div class="result-item">
                        <span class="label">Daily Total:</span>
                        <span id="left-daily-dose" class="value"></span>
                    </div>
                    <div class="result-item">
                        <span class="label">Weight Used:</span>
                        <span id="left-weight-used" class="value"></span>
                    </div>
                </div>
            </section>

            <!-- Medication Dosing Calculator -->
            <section id="left-antibiotics" class="calculator-section">
                <h2>Medication Dosing Calculator</h2>
                <p class="description">Select medication for weight-based dosing with renal adjustments</p>

                <div class="input-group">
                    <label for="left-abx-category">Category</label>
                    <select id="left-abx-category" onchange="updateAntibioticListColumn('left')">
                        <optgroup label="Antibiotics">
                            <option value="iv-common">Common IV Antibiotics</option>
                            <option value="aminoglycosides">Aminoglycosides</option>
                            <option value="pediatric">Pediatric Oral Antibiotics</option>
                            <option value="icu">ICU / Critical Care</option>
                            <option value="general">General Ward</option>
                        </optgroup>
                        <optgroup label="Pediatric Medications">
                            <option value="antiseizure">Antiseizure Medications</option>
                            <option value="nephrology">Nephrology</option>
                            <option value="cardiac">Cardiac / Cardiovascular</option>
                            <option value="respiratory">Respiratory</option>
                            <option value="gi">GI Medications</option>
                            <option value="pain-sedation">Pain / Sedation</option>
                            <option value="electrolytes">Electrolytes & Vitamins</option>
                            <option value="other-pediatric">Other Pediatric</option>
                        </optgroup>
                    </select>
                </div>

                <div class="input-group">
                    <label for="left-med-search">Search Medication (generic or brand name)</label>
                    <div class="search-container">
                        <input type="text" id="left-med-search" placeholder="e.g., Keppra, Lasix, Vancomycin..." oninput="searchMedicationColumn('left', this.value)">
                        <div id="left-search-results" class="search-results hidden"></div>
                    </div>
                </div>

                <div class="input-group">
                    <label for="left-abx-select">Or Select from List</label>
                    <select id="left-abx-select" onchange="updateAntibioticInfoColumn('left')">
                        <option value="">-- Select Medication --</option>
                    </select>
                </div>

                <div id="left-abx-info" class="info-box hidden">
                    <div class="info-row">
                        <span class="info-label">Standard Dose:</span>
                        <span id="left-abx-standard-dose" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Frequency:</span>
                        <span id="left-abx-frequency" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Max Daily Dose:</span>
                        <span id="left-abx-max-dose" class="info-value"></span>
                    </div>
                    <div class="info-row" id="left-abx-notes-row">
                        <span class="info-label">Notes:</span>
                        <span id="left-abx-notes" class="info-value"></span>
                    </div>
                    <div class="info-row" id="left-abx-reference-row" style="display: none;">
                        <span class="info-label">Reference:</span>
                        <span id="left-abx-reference" class="info-value"></span>
                    </div>
                </div>

                <div class="input-group">
                    <label for="left-abx-patient-weight">Patient Weight</label>
                    <div class="input-with-unit">
                        <input type="number" id="left-abx-patient-weight" step="0.1" min="0" placeholder="Enter weight">
                        <select id="left-abx-weight-unit">
                            <option value="kg">kg</option>
                            <option value="lb">lb</option>
                        </select>
                    </div>
                </div>

                <div class="input-group">
                    <label for="left-abx-age-group">Patient Age Group</label>
                    <select id="left-abx-age-group" onchange="updateAntibioticInfoColumn('left')">
                        <option value="adult">Adult (≥18 years)</option>
                        <option value="pediatric">Pediatric (1 mo - 17 yr)</option>
                        <option value="neonate">Neonate (< 1 month)</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="left-abx-renal">Renal Function (CrCl)</label>
                    <select id="left-abx-renal">
                        <option value="normal">Normal (≥90 mL/min)</option>
                        <option value="mild">Mild Impairment (60-89 mL/min)</option>
                        <option value="moderate">Moderate (30-59 mL/min)</option>
                        <option value="severe">Severe (15-29 mL/min)</option>
                        <option value="esrd">ESRD/Dialysis (<15 mL/min)</option>
                    </select>
                </div>

                <div class="input-group" id="left-abx-indication-group">
                    <label for="left-abx-indication">Indication (optional)</label>
                    <select id="left-abx-indication">
                        <option value="standard">Standard Infection</option>
                        <option value="severe">Severe/Life-threatening</option>
                        <option value="meningitis">Meningitis</option>
                        <option value="endocarditis">Endocarditis</option>
                    </select>
                </div>

                <button class="calculate-btn" onclick="calculateAntibioticDoseColumn('left')">Calculate Dose</button>

                <div id="left-abx-result" class="result-box hidden"></div>
            </section>

            <!-- IV Drip Rate Calculator -->
            <section id="left-drip-rate" class="calculator-section">
                <h2>IV Drip Rate Calculator</h2>
                <p class="description">Calculate infusion rate in mL/hr or drops/min</p>

                <div class="calc-mode-toggle">
                    <button class="mode-btn active" data-mode="volume" onclick="switchDripMode('left', 'volume')">Volume-Based</button>
                    <button class="mode-btn" data-mode="dose" onclick="switchDripMode('left', 'dose')">Dose-Based</button>
                </div>

                <!-- Volume-Based Mode -->
                <div id="left-volume-mode" class="mode-content active">
                    <div class="input-group">
                        <label for="left-total-volume">Total Volume to Infuse</label>
                        <div class="input-with-unit">
                            <input type="number" id="left-total-volume" step="1" min="0" placeholder="Enter volume">
                            <span class="unit-label">mL</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="left-infusion-time">Infusion Time</label>
                        <div class="input-with-unit">
                            <input type="number" id="left-infusion-time" step="0.1" min="0" placeholder="Enter time">
                            <select id="left-time-unit">
                                <option value="hr">hours</option>
                                <option value="min">minutes</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="left-drop-factor">Drop Factor (gtt/mL)</label>
                        <select id="left-drop-factor">
                            <option value="10">Macrodrip - 10 gtt/mL</option>
                            <option value="15">Macrodrip - 15 gtt/mL</option>
                            <option value="20">Macrodrip - 20 gtt/mL</option>
                            <option value="60">Microdrip - 60 gtt/mL</option>
                        </select>
                    </div>

                    <button class="calculate-btn" onclick="calculateDripRateColumn('left')">Calculate Rate</button>
                </div>

                <!-- Dose-Based Mode -->
                <div id="left-dose-mode" class="mode-content">
                    <div class="input-group">
                        <label for="left-drug-amount">Drug Amount in Bag</label>
                        <div class="input-with-unit">
                            <input type="number" id="left-drug-amount" step="0.1" min="0" placeholder="Enter amount">
                            <select id="left-drug-amount-unit">
                                <option value="mg">mg</option>
                                <option value="mcg">mcg</option>
                                <option value="units">units</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="left-bag-volume">Bag Volume</label>
                        <div class="input-with-unit">
                            <input type="number" id="left-bag-volume" step="1" min="0" placeholder="Enter volume">
                            <span class="unit-label">mL</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="left-desired-dose">Desired Dose Rate</label>
                        <div class="input-with-unit">
                            <input type="number" id="left-desired-dose" step="0.01" min="0" placeholder="Enter dose">
                            <select id="left-desired-dose-unit" onchange="toggleDoseWeight('left')">
                                <option value="mg/hr">mg/hr</option>
                                <option value="mcg/hr">mcg/hr</option>
                                <option value="mcg/min">mcg/min</option>
                                <option value="units/hr">units/hr</option>
                                <option value="mcg/kg/min">mcg/kg/min</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group" id="left-dose-weight-group" style="display: none;">
                        <label for="left-dose-patient-weight">Patient Weight (for mcg/kg/min)</label>
                        <div class="input-with-unit">
                            <input type="number" id="left-dose-patient-weight" step="0.1" min="0" placeholder="Enter weight">
                            <span class="unit-label">kg</span>
                        </div>
                    </div>

                    <button class="calculate-btn" onclick="calculateDoseBasedRateColumn('left')">Calculate Rate</button>
                </div>

                <div id="left-drip-rate-result" class="result-box hidden">
                    <h3>Results</h3>
                    <div class="result-item">
                        <span class="label">Flow Rate:</span>
                        <span id="left-flow-rate" class="value"></span>
                    </div>
                    <div class="result-item" id="left-drops-result">
                        <span class="label">Drop Rate:</span>
                        <span id="left-drop-rate" class="value"></span>
                    </div>
                    <div class="result-item" id="left-duration-result">
                        <span class="label">Duration:</span>
                        <span id="left-duration" class="value"></span>
                    </div>
                    <div class="result-item" id="left-concentration-result" style="display: none;">
                        <span class="label">Concentration:</span>
                        <span id="left-concentration" class="value"></span>
                    </div>
                </div>
            </section>

            <!-- Drug Dilution Calculator -->
            <section id="left-dilution" class="calculator-section">
                <h2>Drug Dilution Calculator</h2>
                <p class="description">Calculate dilution ratios and final concentrations</p>

                <div class="calc-mode-toggle">
                    <button class="mode-btn active" data-mode="target-conc" onclick="switchDilutionMode('left', 'target-conc')">Target Concentration</button>
                    <button class="mode-btn" data-mode="reconstitution" onclick="switchDilutionMode('left', 'reconstitution')">Reconstitution</button>
                </div>

                <!-- Target Concentration Mode -->
                <div id="left-target-conc-mode" class="mode-content active">
                    <div class="input-group">
                        <label for="left-stock-conc">Stock Concentration</label>
                        <div class="input-with-unit">
                            <input type="number" id="left-stock-conc" step="0.01" min="0" placeholder="Enter concentration">
                            <select id="left-stock-conc-unit">
                                <option value="mg/mL">mg/mL</option>
                                <option value="mcg/mL">mcg/mL</option>
                                <option value="units/mL">units/mL</option>
                                <option value="%">% (g/100mL)</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="left-target-conc">Desired Final Concentration</label>
                        <div class="input-with-unit">
                            <input type="number" id="left-target-conc" step="0.01" min="0" placeholder="Enter target">
                            <select id="left-target-conc-unit">
                                <option value="mg/mL">mg/mL</option>
                                <option value="mcg/mL">mcg/mL</option>
                                <option value="units/mL">units/mL</option>
                                <option value="%">% (g/100mL)</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="left-final-volume">Desired Final Volume</label>
                        <div class="input-with-unit">
                            <input type="number" id="left-final-volume" step="1" min="0" placeholder="Enter volume">
                            <span class="unit-label">mL</span>
                        </div>
                    </div>

                    <button class="calculate-btn" onclick="calculateDilutionColumn('left')">Calculate Dilution</button>
                </div>

                <!-- Reconstitution Mode -->
                <div id="left-reconstitution-mode" class="mode-content">
                    <div class="input-group">
                        <label for="left-powder-amount">Drug Powder Amount</label>
                        <div class="input-with-unit">
                            <input type="number" id="left-powder-amount" step="0.1" min="0" placeholder="Enter amount">
                            <select id="left-powder-unit">
                                <option value="mg">mg</option>
                                <option value="g">g</option>
                                <option value="mcg">mcg</option>
                                <option value="units">units</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="left-diluent-volume">Diluent Volume to Add</label>
                        <div class="input-with-unit">
                            <input type="number" id="left-diluent-volume" step="0.1" min="0" placeholder="Enter volume">
                            <span class="unit-label">mL</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="left-desired-dose-recon">Dose Needed</label>
                        <div class="input-with-unit">
                            <input type="number" id="left-desired-dose-recon" step="0.1" min="0" placeholder="Enter dose">
                            <select id="left-desired-dose-recon-unit">
                                <option value="mg">mg</option>
                                <option value="g">g</option>
                                <option value="mcg">mcg</option>
                                <option value="units">units</option>
                            </select>
                        </div>
                    </div>

                    <button class="calculate-btn" onclick="calculateReconstitutionColumn('left')">Calculate Volume</button>
                </div>

                <div id="left-dilution-result" class="result-box hidden">
                    <h3>Results</h3>
                    <div class="result-item" id="left-stock-vol-result">
                        <span class="label">Stock Solution Needed:</span>
                        <span id="left-stock-volume" class="value"></span>
                    </div>
                    <div class="result-item" id="left-diluent-vol-result">
                        <span class="label">Diluent to Add:</span>
                        <span id="left-diluent-add" class="value"></span>
                    </div>
                    <div class="result-item" id="left-final-conc-result">
                        <span class="label">Final Concentration:</span>
                        <span id="left-final-conc" class="value"></span>
                    </div>
                    <div class="result-item" id="left-volume-draw-result" style="display: none;">
                        <span class="label">Volume to Draw:</span>
                        <span id="left-volume-draw" class="value"></span>
                    </div>
                </div>
            </section>
        </div>

        <!-- RIGHT COLUMN -->
        <div class="calculator-column" id="right-column">
            <div class="column-header">
                <span class="column-label">Calculator 2</span>
                <select class="column-selector" onchange="switchCalculator('right', this.value)">
                    <option value="weight-dose">Weight-Based Dosing</option>
                    <option value="antibiotics" selected>Medications</option>
                    <option value="drip-rate">IV Drip Rate</option>
                    <option value="dilution">Dilution</option>
                </select>
            </div>

            <!-- Weight-Based Dosing Calculator -->
            <section id="right-weight-dose" class="calculator-section">
                <h2>Weight-Based Dosing Calculator</h2>
                <p class="description">Calculate medication dose based on patient weight (mg/kg dosing)</p>

                <div class="input-group">
                    <label for="right-patient-weight">Patient Weight</label>
                    <div class="input-with-unit">
                        <input type="number" id="right-patient-weight" step="0.1" min="0" placeholder="Enter weight">
                        <select id="right-weight-unit">
                            <option value="kg">kg</option>
                            <option value="lb">lb</option>
                        </select>
                    </div>
                </div>

                <div class="input-group">
                    <label for="right-dose-per-kg">Dose per kg</label>
                    <div class="input-with-unit">
                        <input type="number" id="right-dose-per-kg" step="0.01" min="0" placeholder="Enter dose">
                        <select id="right-dose-unit">
                            <option value="mg">mg/kg</option>
                            <option value="mcg">mcg/kg</option>
                            <option value="units">units/kg</option>
                        </select>
                    </div>
                </div>

                <div class="input-group">
                    <label for="right-frequency">Frequency (optional)</label>
                    <select id="right-frequency">
                        <option value="1">Once daily (QD)</option>
                        <option value="2">Twice daily (BID)</option>
                        <option value="3">Three times daily (TID)</option>
                        <option value="4">Four times daily (QID)</option>
                        <option value="6">Every 4 hours (Q4H)</option>
                        <option value="8">Every 3 hours (Q3H)</option>
                    </select>
                </div>

                <button class="calculate-btn" onclick="calculateWeightDoseColumn('right')">Calculate Dose</button>

                <div id="right-weight-dose-result" class="result-box hidden">
                    <h3>Results</h3>
                    <div class="result-item">
                        <span class="label">Single Dose:</span>
                        <span id="right-single-dose" class="value"></span>
                    </div>
                    <div class="result-item">
                        <span class="label">Daily Total:</span>
                        <span id="right-daily-dose" class="value"></span>
                    </div>
                    <div class="result-item">
                        <span class="label">Weight Used:</span>
                        <span id="right-weight-used" class="value"></span>
                    </div>
                </div>
            </section>

            <!-- Medication Dosing Calculator -->
            <section id="right-antibiotics" class="calculator-section active">
                <h2>Medication Dosing Calculator</h2>
                <p class="description">Select medication for weight-based dosing with renal adjustments</p>

                <div class="input-group">
                    <label for="right-abx-category">Category</label>
                    <select id="right-abx-category" onchange="updateAntibioticListColumn('right')">
                        <optgroup label="Antibiotics">
                            <option value="iv-common">Common IV Antibiotics</option>
                            <option value="aminoglycosides">Aminoglycosides</option>
                            <option value="pediatric">Pediatric Oral Antibiotics</option>
                            <option value="icu">ICU / Critical Care</option>
                            <option value="general">General Ward</option>
                        </optgroup>
                        <optgroup label="Pediatric Medications">
                            <option value="antiseizure">Antiseizure Medications</option>
                            <option value="nephrology">Nephrology</option>
                            <option value="cardiac">Cardiac / Cardiovascular</option>
                            <option value="respiratory">Respiratory</option>
                            <option value="gi">GI Medications</option>
                            <option value="pain-sedation">Pain / Sedation</option>
                            <option value="electrolytes">Electrolytes & Vitamins</option>
                            <option value="other-pediatric">Other Pediatric</option>
                        </optgroup>
                    </select>
                </div>

                <div class="input-group">
                    <label for="right-med-search">Search Medication (generic or brand name)</label>
                    <div class="search-container">
                        <input type="text" id="right-med-search" placeholder="e.g., Keppra, Lasix, Vancomycin..." oninput="searchMedicationColumn('right', this.value)">
                        <div id="right-search-results" class="search-results hidden"></div>
                    </div>
                </div>

                <div class="input-group">
                    <label for="right-abx-select">Or Select from List</label>
                    <select id="right-abx-select" onchange="updateAntibioticInfoColumn('right')">
                        <option value="">-- Select Medication --</option>
                    </select>
                </div>

                <div id="right-abx-info" class="info-box hidden">
                    <div class="info-row">
                        <span class="info-label">Standard Dose:</span>
                        <span id="right-abx-standard-dose" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Frequency:</span>
                        <span id="right-abx-frequency" class="info-value"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Max Daily Dose:</span>
                        <span id="right-abx-max-dose" class="info-value"></span>
                    </div>
                    <div class="info-row" id="right-abx-notes-row">
                        <span class="info-label">Notes:</span>
                        <span id="right-abx-notes" class="info-value"></span>
                    </div>
                    <div class="info-row" id="right-abx-reference-row" style="display: none;">
                        <span class="info-label">Reference:</span>
                        <span id="right-abx-reference" class="info-value"></span>
                    </div>
                </div>

                <div class="input-group">
                    <label for="right-abx-patient-weight">Patient Weight</label>
                    <div class="input-with-unit">
                        <input type="number" id="right-abx-patient-weight" step="0.1" min="0" placeholder="Enter weight">
                        <select id="right-abx-weight-unit">
                            <option value="kg">kg</option>
                            <option value="lb">lb</option>
                        </select>
                    </div>
                </div>

                <div class="input-group">
                    <label for="right-abx-age-group">Patient Age Group</label>
                    <select id="right-abx-age-group" onchange="updateAntibioticInfoColumn('right')">
                        <option value="adult">Adult (≥18 years)</option>
                        <option value="pediatric">Pediatric (1 mo - 17 yr)</option>
                        <option value="neonate">Neonate (< 1 month)</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="right-abx-renal">Renal Function (CrCl)</label>
                    <select id="right-abx-renal">
                        <option value="normal">Normal (≥90 mL/min)</option>
                        <option value="mild">Mild Impairment (60-89 mL/min)</option>
                        <option value="moderate">Moderate (30-59 mL/min)</option>
                        <option value="severe">Severe (15-29 mL/min)</option>
                        <option value="esrd">ESRD/Dialysis (<15 mL/min)</option>
                    </select>
                </div>

                <div class="input-group" id="right-abx-indication-group">
                    <label for="right-abx-indication">Indication (optional)</label>
                    <select id="right-abx-indication">
                        <option value="standard">Standard Infection</option>
                        <option value="severe">Severe/Life-threatening</option>
                        <option value="meningitis">Meningitis</option>
                        <option value="endocarditis">Endocarditis</option>
                    </select>
                </div>

                <button class="calculate-btn" onclick="calculateAntibioticDoseColumn('right')">Calculate Dose</button>

                <div id="right-abx-result" class="result-box hidden"></div>
            </section>

            <!-- IV Drip Rate Calculator -->
            <section id="right-drip-rate" class="calculator-section">
                <h2>IV Drip Rate Calculator</h2>
                <p class="description">Calculate infusion rate in mL/hr or drops/min</p>

                <div class="calc-mode-toggle">
                    <button class="mode-btn active" data-mode="volume" onclick="switchDripMode('right', 'volume')">Volume-Based</button>
                    <button class="mode-btn" data-mode="dose" onclick="switchDripMode('right', 'dose')">Dose-Based</button>
                </div>

                <!-- Volume-Based Mode -->
                <div id="right-volume-mode" class="mode-content active">
                    <div class="input-group">
                        <label for="right-total-volume">Total Volume to Infuse</label>
                        <div class="input-with-unit">
                            <input type="number" id="right-total-volume" step="1" min="0" placeholder="Enter volume">
                            <span class="unit-label">mL</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="right-infusion-time">Infusion Time</label>
                        <div class="input-with-unit">
                            <input type="number" id="right-infusion-time" step="0.1" min="0" placeholder="Enter time">
                            <select id="right-time-unit">
                                <option value="hr">hours</option>
                                <option value="min">minutes</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="right-drop-factor">Drop Factor (gtt/mL)</label>
                        <select id="right-drop-factor">
                            <option value="10">Macrodrip - 10 gtt/mL</option>
                            <option value="15">Macrodrip - 15 gtt/mL</option>
                            <option value="20">Macrodrip - 20 gtt/mL</option>
                            <option value="60">Microdrip - 60 gtt/mL</option>
                        </select>
                    </div>

                    <button class="calculate-btn" onclick="calculateDripRateColumn('right')">Calculate Rate</button>
                </div>

                <!-- Dose-Based Mode -->
                <div id="right-dose-mode" class="mode-content">
                    <div class="input-group">
                        <label for="right-drug-amount">Drug Amount in Bag</label>
                        <div class="input-with-unit">
                            <input type="number" id="right-drug-amount" step="0.1" min="0" placeholder="Enter amount">
                            <select id="right-drug-amount-unit">
                                <option value="mg">mg</option>
                                <option value="mcg">mcg</option>
                                <option value="units">units</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="right-bag-volume">Bag Volume</label>
                        <div class="input-with-unit">
                            <input type="number" id="right-bag-volume" step="1" min="0" placeholder="Enter volume">
                            <span class="unit-label">mL</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="right-desired-dose">Desired Dose Rate</label>
                        <div class="input-with-unit">
                            <input type="number" id="right-desired-dose" step="0.01" min="0" placeholder="Enter dose">
                            <select id="right-desired-dose-unit" onchange="toggleDoseWeight('right')">
                                <option value="mg/hr">mg/hr</option>
                                <option value="mcg/hr">mcg/hr</option>
                                <option value="mcg/min">mcg/min</option>
                                <option value="units/hr">units/hr</option>
                                <option value="mcg/kg/min">mcg/kg/min</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group" id="right-dose-weight-group" style="display: none;">
                        <label for="right-dose-patient-weight">Patient Weight (for mcg/kg/min)</label>
                        <div class="input-with-unit">
                            <input type="number" id="right-dose-patient-weight" step="0.1" min="0" placeholder="Enter weight">
                            <span class="unit-label">kg</span>
                        </div>
                    </div>

                    <button class="calculate-btn" onclick="calculateDoseBasedRateColumn('right')">Calculate Rate</button>
                </div>

                <div id="right-drip-rate-result" class="result-box hidden">
                    <h3>Results</h3>
                    <div class="result-item">
                        <span class="label">Flow Rate:</span>
                        <span id="right-flow-rate" class="value"></span>
                    </div>
                    <div class="result-item" id="right-drops-result">
                        <span class="label">Drop Rate:</span>
                        <span id="right-drop-rate" class="value"></span>
                    </div>
                    <div class="result-item" id="right-duration-result">
                        <span class="label">Duration:</span>
                        <span id="right-duration" class="value"></span>
                    </div>
                    <div class="result-item" id="right-concentration-result" style="display: none;">
                        <span class="label">Concentration:</span>
                        <span id="right-concentration" class="value"></span>
                    </div>
                </div>
            </section>

            <!-- Drug Dilution Calculator -->
            <section id="right-dilution" class="calculator-section">
                <h2>Drug Dilution Calculator</h2>
                <p class="description">Calculate dilution ratios and final concentrations</p>

                <div class="calc-mode-toggle">
                    <button class="mode-btn active" data-mode="target-conc" onclick="switchDilutionMode('right', 'target-conc')">Target Concentration</button>
                    <button class="mode-btn" data-mode="reconstitution" onclick="switchDilutionMode('right', 'reconstitution')">Reconstitution</button>
                </div>

                <!-- Target Concentration Mode -->
                <div id="right-target-conc-mode" class="mode-content active">
                    <div class="input-group">
                        <label for="right-stock-conc">Stock Concentration</label>
                        <div class="input-with-unit">
                            <input type="number" id="right-stock-conc" step="0.01" min="0" placeholder="Enter concentration">
                            <select id="right-stock-conc-unit">
                                <option value="mg/mL">mg/mL</option>
                                <option value="mcg/mL">mcg/mL</option>
                                <option value="units/mL">units/mL</option>
                                <option value="%">% (g/100mL)</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="right-target-conc">Desired Final Concentration</label>
                        <div class="input-with-unit">
                            <input type="number" id="right-target-conc" step="0.01" min="0" placeholder="Enter target">
                            <select id="right-target-conc-unit">
                                <option value="mg/mL">mg/mL</option>
                                <option value="mcg/mL">mcg/mL</option>
                                <option value="units/mL">units/mL</option>
                                <option value="%">% (g/100mL)</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="right-final-volume">Desired Final Volume</label>
                        <div class="input-with-unit">
                            <input type="number" id="right-final-volume" step="1" min="0" placeholder="Enter volume">
                            <span class="unit-label">mL</span>
                        </div>
                    </div>

                    <button class="calculate-btn" onclick="calculateDilutionColumn('right')">Calculate Dilution</button>
                </div>

                <!-- Reconstitution Mode -->
                <div id="right-reconstitution-mode" class="mode-content">
                    <div class="input-group">
                        <label for="right-powder-amount">Drug Powder Amount</label>
                        <div class="input-with-unit">
                            <input type="number" id="right-powder-amount" step="0.1" min="0" placeholder="Enter amount">
                            <select id="right-powder-unit">
                                <option value="mg">mg</option>
                                <option value="g">g</option>
                                <option value="mcg">mcg</option>
                                <option value="units">units</option>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="right-diluent-volume">Diluent Volume to Add</label>
                        <div class="input-with-unit">
                            <input type="number" id="right-diluent-volume" step="0.1" min="0" placeholder="Enter volume">
                            <span class="unit-label">mL</span>
                        </div>
                    </div>

                    <div class="input-group">
                        <label for="right-desired-dose-recon">Dose Needed</label>
                        <div class="input-with-unit">
                            <input type="number" id="right-desired-dose-recon" step="0.1" min="0" placeholder="Enter dose">
                            <select id="right-desired-dose-recon-unit">
                                <option value="mg">mg</option>
                                <option value="g">g</option>
                                <option value="mcg">mcg</option>
                                <option value="units">units</option>
                            </select>
                        </div>
                    </div>

                    <button class="calculate-btn" onclick="calculateReconstitutionColumn('right')">Calculate Volume</button>
                </div>

                <div id="right-dilution-result" class="result-box hidden">
                    <h3>Results</h3>
                    <div class="result-item" id="right-stock-vol-result">
                        <span class="label">Stock Solution Needed:</span>
                        <span id="right-stock-volume" class="value"></span>
                    </div>
                    <div class="result-item" id="right-diluent-vol-result">
                        <span class="label">Diluent to Add:</span>
                        <span id="right-diluent-add" class="value"></span>
                    </div>
                    <div class="result-item" id="right-final-conc-result">
                        <span class="label">Final Concentration:</span>
                        <span id="right-final-conc" class="value"></span>
                    </div>
                    <div class="result-item" id="right-volume-draw-result" style="display: none;">
                        <span class="label">Volume to Draw:</span>
                        <span id="right-volume-draw" class="value"></span>
                    </div>
                </div>
            </section>
        </div>
        </div>
    </div>

    <footer>
        <p><strong>Important:</strong> Double-check all calculations. Report any errors immediately.</p>
        <p class="version">Version 2.2 | For educational and reference use only</p>
    </footer>

    <script src="calculator.js"></script>
</body>
</html>
